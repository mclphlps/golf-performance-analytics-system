ts,step_name,description,inputs,outputs,rows,cols,extra_info
2025-11-16 19:33:12,1.1 Setup & Configuration,"Environment, paths, secrets, governance containers, and helper utilities initialized.",[],[],,,"{'project_root': 'C:\\Users\\micha\\onedrive\\documents\\newforce\\golf-capstone', 'data_path': 'C:\\Users\\micha\\onedrive\\documents\\newforce\\golf-capstone\\data', 'private_data_path': 'C:\\Users\\micha\\onedrive\\documents\\newforce\\golf-capstone\\data\\private', 'output_path': 'C:\\Users\\micha\\onedrive\\documents\\newforce\\golf-capstone\\deliverables', 'api_key_loaded': True, 'pandas_version': '2.3.3', 'matplotlib_version': '3.9.4', 'numpy_version': '2.3.4', 'conda_env': 'golfcapstone', 'phase': '1.1', 'category': 'setup'}"
2025-11-16 19:33:12,2.1 Load Raw GolfShot Data,"Loaded GolfShot vendor export, added row_id, and validated expected raw columns.",['C:\\Users\\micha\\onedrive\\documents\\newforce\\golf-capstone\\data\\raw\\golfshot_export_all.csv'],['golf_raw'],4287.0,24.0,"{'phase': '2.1', 'category': 'ingest', 'note': 'Authoritative raw ingest. Do not clean here.', 'preview_cols': ['Name', 'Round DateTime (UTC)', 'Facility Name', 'Course Name', 'Round Score', 'Round Fairway Hits', 'Round Putts', 'Round GIR', 'Hole Number', 'Hole Par', 'Hole Fairway Hit Type', 'Hole Fairway Hits']}"
2025-11-16 19:33:12,2.2 Standardize Schema & Datatypes,"Standardized column names, cleaned vendor percent fields, parsed datetime, and applied nullable numeric dtypes.",['golf_raw'],['golf'],4287.0,24.0,"{'phase': '2.2', 'category': 'transform', 'round_dt_nulls': 0, 'round_gir_min': 0.0, 'round_gir_max': 66.6667, 'note': 'This establishes the internal schema contract for all 2.x and 3.x steps.'}"
2025-11-16 19:33:12,2.3 Initial Data Profiling,"Captured baseline completeness, distinct entities, and GPS availability for standardized dataset.",['golf'],[],4287.0,24.0,"{'phase': '2.3', 'category': 'profile', 'total_rows': 4287, 'total_cols': 24, 'gps_valid_pct': 45.579659435502684, 'hole_score_range': (0.0, 15.0), 'distinct_players': 12, 'distinct_facilities': 28, 'distinct_facility_course_pairs': 30, 'null_pct_preview': {'round_dt': 0.0, 'player_name': 0.0, 'facility': 0.0, 'course': 0.0, 'hole_number': 0.0, 'hole_score': 0.0}}"
2025-11-16 19:33:12,2.4 Core Field Validation & Logical Consistency,Audited golf data for logical consistency before any row filtering. Logged rule violations and downstream cleanup assumptions.,['golf'],['violation_summary_df'],4287.0,24.0,"{'phase': '2.4', 'category': 'validation', 'most_common_violations': [{'rule_name': 'hole_score_nonpositive', 'violations': 275, 'violation_pct': 6.41}, {'rule_name': 'hole_number_out_of_range', 'violations': 0, 'violation_pct': 0.0}, {'rule_name': 'round_dt_missing', 'violations': 0, 'violation_pct': 0.0}], 'note': 'No rows were dropped in 2.4. Cleanup happens in Section 3.'}"
2025-11-16 19:33:12,2.5 Initial Vendor Yardage Validation,Validated vendor yardage against GPS-derived yardage for all eligible rows; flagged large discrepancies.,['golf'],['golf (with yardage diagnostics)'],4287.0,29.0,"{'phase': '2.5', 'category': 'validation', 'eligible_shots_evaluated': 1954, 'with_valid_calc': 1954, 'mean_abs_error_yards': 0.52, 'max_abs_error_yards': 1.82, 'pct_flagged_suspect': 0.0, 'tolerance_pct': 5.0, 'min_distance_evaluated': 30.0}"
2025-11-16 19:33:15,2.6 Phase 2 Governance Close-Out,Locked and exported governed baseline prior to Section 3 (Data Preparation).,['golf'],"['golf_clean_snapshot.xlsx', 'governance artifact bundle']",4287.0,29.0,"{'phase': '2.6', 'category': 'export', 'export_path': 'C:\\Users\\micha\\onedrive\\documents\\newforce\\golf-capstone\\data\\private\\golf_clean_snapshot.xlsx', 'note': 'End-of-phase control gate completed.'}"
2025-11-16 19:33:15,3.1.1 Filter Invalid Hole Records,"Removed non-scoring / placeholder hole rows so all 3.1.x steps operate on real, scored holes.",['golf (phase 2 output)'],['golf_valid'],4012.0,29.0,"{'phase': '3.1.1', 'category': 'filter', 'rows_before': 4287, 'rows_after': 4012, 'pct_retained': 93.59, 'non_scoring_rows_dropped': 275, 'any_zero_scores_left': False, 'note': 'Downstream 3.1.x steps should consume `golf_valid`.'}"
2025-11-16 19:33:15,3.1.2 Calculate Holes Scored per Round,"Computed distinct holes per (player, round_dt, facility, course) to assess round completeness.",['golf_valid'],['holes_per_round'],210.0,5.0,"{'phase': '3.1.2', 'category': 'aggregation', 'unique_rounds_detected': 210, 'holecount_distribution': {3: 1, 4: 2, 9: 101, 14: 1, 18: 105}, 'note': 'Rounds with hole counts not in {9, 18} will be flagged/merged in 3.1.3.'}"
2025-11-16 19:33:15,3.1.3 Attach Round Hole Counts & Identify Partial Rounds,Merged holes_per_round helper onto golf_valid and flagged non-standard (partial) rounds.,"['golf_valid (3.1.1)', 'holes_per_round (3.1.2)']","['golf_valid', 'partial_rounds']",4012.0,31.0,"{'phase': '3.1.3', 'category': 'enrichment', 'partial_rounds_detected': 4, 'standard_round_rule': 'Valid rounds are exactly 9 or 18 distinct scored holes.', 'note': '3.1.4 will filter out rows where is_partial_round == True.'}"
2025-11-16 19:33:15,3.1.4 Keep Only Complete Rounds,Removed partial or incomplete rounds based on the 9/18-hole completeness rule.,['golf_valid (enriched with holes_scored_in_round)'],['golf_valid (complete rounds only)'],3987.0,31.0,"{'phase': '3.1.4', 'category': 'filter', 'rows_before': 4012, 'rows_after': 3987, 'pct_retained': 99.38, 'round_size_distribution': {np.int64(9): 101, np.int64(18): 105}, 'note': 'Working dataset now contains only complete 9- or 18-hole rounds; downstream steps can assume completeness.'}"
2025-11-16 19:33:15,3.1.5 Assign Sequential Round Numbers per Player,Created chronological round index per player for progression/improvement analysis.,['golf_valid (complete rounds only)'],['golf_valid (with round_no_player)'],3987.0,32.0,"{'phase': '3.1.5', 'category': 'feature_engineering', 'unique_rounds_after_seq': 206, 'preview_rows': 20, 'note': 'round_no_player is now available for player progression views.'}"
2025-11-16 19:33:15,3.1.6 Assign Sequential Visit Number per Player × Course,"Created course-specific visit sequencing (1st visit, 2nd visit, …) for each player.",['golf_valid'],['golf_valid'],3987.0,33.0,"{'phase': '3.1.6', 'category': 'feature_engineering', 'unique_player_course_pairs': 57, 'round_visit_preview_rows': 30, 'note': 'round_no_player_course now available for course-familiarity and adaptation analysis.'}"
2025-11-16 19:33:15,3.1.7 Create Round Identifiers & Sequencing,Created round-level surrogate IDs and merged them onto golf_valid for stable joins.,['golf_valid (hole-level)'],"['golf_valid (with round_id, round_key)', 'round_index (round-level)']",3987.0,35.0,"{'phase': '3.1.7', 'category': 'enrichment', 'distinct_rounds_created': 206, 'note': 'round_index can be exported or joined later for round-level reporting.'}"
2025-11-16 19:33:15,3.1.8.1 Derive Time Features,"Derived time-of-day, weekday/weekend, and part-of-day features from round_dt.",['golf_valid (round-level enriched)'],['golf_valid (with temporal features)'],3987.0,41.0,"{'phase': '3.1.8.1', 'category': 'feature_engineering', 'rows_enriched': 3987, 'part_of_day_distribution': {'Afternoon': 588, 'Evening': 489, 'Morning': 2874, 'Night': 36}, 'note': 'Temporal context now ready for quality validation in 3.1.8.2.'}"
2025-11-16 19:33:15,3.1.8.2 Validate Round Time Quality,Flagged unrealistic tee times using 05:00–20:59 rule; kept rows but marked them for exclusion in some analyses.,['golf_valid (with temporal features)'],['golf_valid (with round_time_valid)'],3987.0,42.0,"{'phase': '3.1.8.2', 'category': 'data_quality', 'distinct_rounds_with_suspect_times': 2, 'business_rule': 'Valid tee times are 05:00–20:59 local; others flagged.', 'impact_note': 'No rows dropped; suspect rounds can be filtered in analysis.'}"
2025-11-16 19:33:15,3.1.8.3 Derive Seasonal & Annual Context,Added higher-level calendar and seasonal context to each round for trend analysis.,['golf_valid (with time features)'],['golf_valid (with seasonal/annual context)'],3987.0,48.0,"{'unique_player_year_pairs': 41, 'season_distribution': {'Fall': 1216, 'Spring': 575, 'Summer': 2178, 'Winter': 18}, 'note': 'round_year_index enables per-player longitudinal performance review.'}"
2025-11-16 19:33:15,3.1.9 Rename Columns for Analysis,Standardized column prefixes and normalized GIR indicator. Safe to re-run.,['golf_valid'],['golf_valid'],3987.0,48.0,"{'phase': '3.1.9', 'category': 'standardization', 'applied_renames': {'hole_fairway_hits': 'hole_fairway_strokes', 'round_fairway_hits': 'round_fairway_strokes', 'hole_fairway_hit_type': 'shot_fairway_hit_type', 'holes_scored_in_round': 'round_holes_scored', 'is_partial_round': 'round_is_partial'}, 'note': 'This is an idempotent cleanup step to make 3.2–3.5 easier to read.'}"
2025-11-16 19:33:15,3.1.10 Round-level Validity & Features Closeout,"Validated round-level schema, captured audit snapshot, and marked dataset ready for 3.2 Hole-level Validity & Features.",['golf_valid (post 3.1.9)'],['golf_valid (ready for 3.2)'],3987.0,48.0,"{'phase_complete': True, 'validated_columns': ['player_name', 'round_dt', 'facility', 'course', 'round_id', 'round_key', 'round_no_player', 'round_no_player_course', 'round_holes_scored', 'round_fairway_strokes', 'round_is_partial', 'round_time_valid', 'part_of_day', 'season', 'year', 'month', 'round_year_index'], 'next_step': '3.2 Hole-level Validity & Features', 'note': 'Use the same golf_valid for 3.2; continue appending hole-level fields.'}"
2025-11-16 19:33:15,3.2.1 Derive Hole-Level Context Features,Created standard hole-level context fields for scoring/GIR analysis.,['golf_valid'],['golf_valid'],3987.0,51.0,"{'new_cols': ['hole_par_bucket', 'hole_strokes_over_par', 'hole_score_name'], 'distinct_hole_score_names': 7, 'note': 'These fields are safe to reuse in 3.2.2–3.2.3.'}"
2025-11-16 19:33:15,3.2.2 Derive Hole-Level Putting Flags,"Created standardized hole-level putting indicators (over-expected, 3+ putts, GIR/non-GIR splits).",['golf_valid'],['golf_valid'],3987.0,55.0,"{'total_rows': 3987, 'total_3plus': 691, 'gir_3plus': 211, 'nongir_3plus': 480, 'note': 'These flags support miss/lag-putting analysis and hole-out quality signals.'}"
2025-11-16 19:33:16,3.2.3 Derive Hole Outcome Quality Signals,"Derived hole-level outcome flags (scramble, wasted GIR, chip-ins) to explain scoring results.",['golf_valid'],['golf_valid'],3987.0,61.0,"{'scramble_opportunities': 1429, 'scramble_successes': 248, 'gir_wasted': 204, 'nongir_chip_ins': 14, 'note': 'These are descriptive flags; no rows were dropped.'}"
2025-11-16 19:33:16,3.2.4 Hole-Level Validity & Features Closeout,"Validated hole-level schema, captured profile, added per-hole shot centroids, and logged readiness for next section.",['golf_valid (post 3.2.3)'],['golf_valid (ready for 3.3 / next family)'],3987.0,64.0,"{'total_holes': 3987, 'unique_rounds': 206, 'putt_3plus_rate_pct': 17.33, 'scramble_success_rate_pct': 17.35, 'gir_wasted_rate_pct': 5.12, 'holes_with_centroids': 2408}"
2025-11-16 19:33:16,3.3.1 Build Player–Club Planning Profile,"Computed planning distances (p50, p65, p80) and app_pct_* directional mix; stored in player_club_profile.",['golf_valid'],['player_club_profile'],14.0,23.0,"{'groups_total': 14, 'groups_sufficient': 14, 'min_shots_threshold': 5, 'plan_pct_short': 0.5, 'plan_pct_on': 0.65, 'plan_pct_long': 0.8}"
2025-11-16 19:33:22,3.3.2 Player–Club–Hole Dispersion,"Measured per-hole left/right dispersion from derived line-of-play, with tunable percentile and mapping anchors.",['golf_valid'],['player_club_hole_dispersion'],250.0,16.0,"{'hole_groups_with_dispersion': 250, 'raw_points_used': 778, 'dispersion_percentile': 0.5}"
2025-11-16 19:33:22,3.3.3 Player–Club Dispersion Rollup,"Rolled up per-hole dispersion to one row per player+club, preserving coverage and sufficiency signals.",['player_club_hole_dispersion'],['player_club_dispersion_rollup'],13.0,8.0,"{'player_club_rows': 13, 'rollup_strategy': 'nonzero_p75', 'weighted_by_shots': False, 'min_holes_for_confidence': 2}"
2025-11-16 19:33:22,3.3.4 Attach Dispersion to Player–Club Profile,Joined club-level dispersion metrics onto the player–club planning profile.,"['player_club_profile (3.3.1)', 'player_club_dispersion_rollup (3.3.3)']",['player_club_profile'],14.0,26.0,"{'rows_after_enrichment': 14, 'added_dispersion_columns': ['plan_dispersion', 'dispersion_hole_count', 'dispersion_shot_count'], 'note': 'This is the unified per-player, per-club table (distance + dispersion).'}"
2025-11-16 19:33:22,3.3.5 Enrich Player–Club Profile with Dispersion Cone Fields,Added dispersion cone metrics so Tableau can draw cones without extra calcs.,['player_club_profile (from 3.3.4)'],['player_club_profile'],14.0,32.0,"{'players_processed': 1, 'rows_processed': 14}"
2025-11-16 19:33:22,3.3.6 Club-Level Validity & Features Closeout,"Validated player_club_profile (distances + dispersion + cone fields), player_club_hole_dispersion, and player_club_dispersion_rollup; captured coverage metrics for Phase 4.","['player_club_profile (3.3.1, 3.3.4, 3.3.5)', 'player_club_hole_dispersion (3.3.2)', 'player_club_dispersion_rollup (3.3.3)']",['player_club_profile (ready for Phase 4)'],14.0,32.0,"{'total_player_clubs': 14, 'clubs_with_dispersion': 13, 'clubs_with_dispersion_pct': 92.86, 'clubs_with_cone_fields': 14, 'clubs_with_cone_fields_pct': 100.0, 'clubs_with_sufficient_shots': 14, 'avg_plan_distance_hit': 151.86, 'avg_plan_dispersion': 82.45}"
2025-11-16 19:33:22,3.4.1 Build / Refresh Facilities Table,Derived unique facility×course combos with observed round metrics; preserved user-editable hint columns.,"['golf_valid', 'C:\\Users\\micha\\onedrive\\documents\\newforce\\golf-capstone\\data\\raw\\facilities.csv']","['facilities', 'C:\\Users\\micha\\onedrive\\documents\\newforce\\golf-capstone\\data\\raw\\facilities.csv']",30.0,16.0,"{'distinct_facility_course': 30, 'rows_needing_hints': 0, 'user_editable_columns': ['hint_city', 'hint_state_abbr'], 'note': 'User should open the cached facilities.csv and fill in hint_city / hint_state_abbr where blank.'}"
2025-11-16 19:33:23,3.4.2 Derive Shot-Based Facility Centroids,Estimated facility/course centroids from observed shots and merged onto facilities table.,"['golf_valid', 'facilities (pre-3.4.2)']","['facilities (with shot centroids)', 'C:\\Users\\micha\\onedrive\\documents\\newforce\\golf-capstone\\data\\raw\\facilities.csv']",30.0,16.0,"{'facility_course_rows': 30, 'centroids_built_this_run': 10, 'valid_shots_used': 1946, 'note': 'User-edited facility rows will be preserved on re-run.'}"
2025-11-16 19:33:23,3.4.3 Geocode Remaining Facilities,Promoted shot centroids to canonical geo_* and geocoded leftover facilities using public geocoders.,['facilities (from 3.4.1/3.4.2)'],"['facilities', 'C:\\Users\\micha\\onedrive\\documents\\newforce\\golf-capstone\\data\\raw\\facilities.csv']",30.0,16.0,"{'promoted_from_shots': 0, 'geo_source_counts': {'arcgis': 12, 'shot_centroid': 10, 'nominatim': 8}, 'rows_still_missing_geo': 0, 'note': 'If some rows are still missing, add hint_city / hint_state_abbr and rerun 3.4.3.'}"
2025-11-16 19:33:25,3.4.4 Build Facility Timezones from Coordinates,Derived IANA timezones using TimezoneFinder; defaulted unresolved rows.,['facilities'],"['facilities', 'C:\\Users\\micha\\onedrive\\documents\\newforce\\golf-capstone\\data\\raw\\facilities.csv']",30.0,16.0,"{'resolved_from_coords': 0, 'defaulted_due_to_missing_or_unresolved_coords': 0, 'default_tz_used': 'America/New_York'}"
2025-11-16 19:33:25,3.4.5 Enrich Facilities from GolfCourseAPI (cache-only),Selective GolfCourseAPI lookups based on run_api_again and cache status; wrote results to facilities_api_cache.csv only.,"['facilities', 'C:\\Users\\micha\\onedrive\\documents\\newforce\\golf-capstone\\data\\raw\\facilities_api_cache.csv']",['C:\\Users\\micha\\onedrive\\documents\\newforce\\golf-capstone\\data\\raw\\facilities_api_cache.csv'],30.0,26.0,"{'rows_in_facilities': 30, 'rows_needing_api': 0, 'api_calls_made': 0, 'hit_rate_limit': False, 'cache_rows_after': 30}"
2025-11-16 19:33:25,3.5.1 Create DataFrames for Phase 4,"Split governance-ready golf_valid into round-, hole-, and shot-level tables with relational keys.",['golf_valid'],"['golf_rounds', 'golf_holes', 'golf_shots']",3987.0,65.0,"{'golf_rounds_rows': 206, 'golf_holes_rows': 2799, 'golf_shots_rows': 1946, 'note': 'These will be exported in 3.5.2 close-out.'}"
